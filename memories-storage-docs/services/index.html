
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../models/">
      
      
        <link rel="next" href="../storage/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Services - Memories Storage Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#services" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Memories Storage Docs" class="md-header__button md-logo" aria-label="Memories Storage Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Memories Storage Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Services
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/forestlaw77/memories-storage" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Memories Storage Docs" class="md-nav__button md-logo" aria-label="Memories Storage Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Memories Storage Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/forestlaw77/memories-storage" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Memories Storage Docs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Memories Storage Docs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Auth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Services
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<p><a id="services"></a></p>
<h1 id="services">services</h1>
<p><a id="services.book_service"></a></p>
<h1 id="servicesbook_service">services.book_service</h1>
<p><a id="services.book_service.BookService"></a></p>
<h2 id="bookservice-objects">BookService Objects</h2>
<pre><code class="language-python">class BookService(BaseService)
</code></pre>
<p>Service for handling book-related resources, including thumbnail processing.</p>
<p><a id="services.book_service.BookService.__init__"></a></p>
<h4 id="__init__">__init__</h4>
<pre><code class="language-python">def __init__(storage_backend)
</code></pre>
<p>Initializes the BookService with a specified storage backend.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>storage_backend</code> - The backend used for storing book resources.</li>
</ul>
<p><a id="services.base_service"></a></p>
<h1 id="servicesbase_service">services.base_service</h1>
<p><a id="services.base_service.BaseService"></a></p>
<h2 id="baseservice-objects">BaseService Objects</h2>
<pre><code class="language-python">class BaseService()
</code></pre>
<p>BaseService class for managing resources and their metadata.
This class provides methods for creating, updating, and retrieving resources,
as well as handling content and thumbnail generation.</p>
<p><a id="services.base_service.BaseService.__init__"></a></p>
<h4 id="__init___1">__init__</h4>
<pre><code class="language-python">def __init__(storage_backend: AbstractStorageBackend, resource_name: str)
</code></pre>
<p>Initializes the BaseService with a storage backend and resource name.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>storage_backend</code> <em>AbstractStorageBackend</em> - The storage backend for resource management.</li>
<li><code>resource_name</code> <em>str</em> - The name of the resource type.</li>
</ul>
<p><a id="services.base_service.BaseService.get_resource_ids"></a></p>
<h4 id="get_resource_ids">get_resource_ids</h4>
<pre><code class="language-python">def get_resource_ids() -&gt; Response
</code></pre>
<p>Retrieves a list of resource IDs for the authenticated user.</p>
<p><strong>Arguments</strong>:</p>
<p>None (uses authenticated user context).</p>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Response</code> - A JSON response containing resource IDs.</li>
</ul>
<p><a id="services.base_service.BaseService.get_resource_list"></a></p>
<h4 id="get_resource_list">get_resource_list</h4>
<pre><code class="language-python">def get_resource_list() -&gt; Response
</code></pre>
<p>[GET] /RESOURCE_TYPE/
Retrieves a list of resource IDs belonging to the authenticated user.
If pagination (<code>page</code> and <code>per_page</code>) is specified, returns a paginated response.</p>
<p><strong>Arguments</strong>:</p>
<p>None (uses authenticated user context).</p>
<p>Query Parameters:
- <code>page</code> <em>int, optional</em> - The page number for pagination.
- <code>per_page</code> <em>int, optional</em> - The number of resources per page.</p>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Response</code> - A JSON response containing resource IDs and pagination details.</li>
</ul>
<p>Process:
  1. Retrieve total number of resources and resource list.
  2. Apply pagination if <code>page</code> and <code>per_page</code> are provided.
  3. Return a structured response with paginated resource IDs.</p>
<p>Response Structure:
  {
- <code>"status"</code> - "success",
- <code>"message"</code> - "Resource list retrieved successfully.",
- <code>"response_data"</code> - {
- <code>"resources"</code> - [],
- <code>"total_items"</code> - <int>,
- <code>"page"</code> - <int | "all">,
- <code>"per_page"</code> - <int | "all">
  }
  }</p>
<p><a id="services.base_service.BaseService.get_content_list"></a></p>
<h4 id="get_content_list">get_content_list</h4>
<pre><code class="language-python">def get_content_list(resource_id: str) -&gt; Response
</code></pre>
<p>Retrieves the list of content IDs and metadata associated with a specific resource.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>resource_id</code> <em>str</em> - The unique identifier for the resource.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Response</code> - A JSON response containing content IDs and metadata.</li>
</ul>
<p>Process:
  1. Validate the resource ID.
  2. Retrieve associated content IDs from the content manager.
  3. Load resource metadata from storage backend.
  4. Return a structured response containing <code>content_ids</code> and <code>contents</code>.</p>
<p>Response Structure:</p>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;success&quot;,
    &quot;message&quot;: &quot;Content list for resource retrieved successfully.&quot;,
    &quot;resource_id&quot;: &quot;&lt;str&gt;&quot;,
    &quot;response_data&quot;: {
        &quot;content_ids&quot;: [1, 2, ...],
        &quot;contents&quot;: [{ &quot;id&quot;: &lt;int&gt;, &quot;filename&quot;: &quot;&lt;str&gt;&quot;, &quot;mimetype&quot;: &quot;&lt;str&gt;&quot;, &quot;hash&quot;: &quot;&lt;str&gt;&quot; }, ...]
    }
}
</code></pre>
<p><a id="services.base_service.BaseService.make_resource"></a></p>
<h4 id="make_resource">make_resource</h4>
<pre><code class="language-python">def make_resource(resource_component: Optional[str] = None) -&gt; Response
</code></pre>
<p>[POST] /RESOURCE_TYPE/
Creates a new resource. Accepts metadata via 'detail-file' and/or content via 'content-file'.
The 'resource_component' parameter can specify if only metadata or content is being uploaded.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>resource_component</code> <em>Optional[str]</em> - Specifies if "meta" (metadata-only) or "content" (content-only) is being uploaded. Defaults to None.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Response</code> - A JSON response indicating the success or failure of the resource creation.</li>
</ul>
<p>Process:
  1. Validate input files (metadata and/or content).
  2. Generate resource ID if needed.
  3. Process content file (generate content ID, compute hash, and validate format).
  4. Structure metadata using <code>_make_resource_meta()</code>.
  5. Save resource and return a success or error response.</p>
<p>Response Structure:
  {
- <code>"status"</code> - "success",
- <code>"message"</code> - "Resource added successfully.",
- <code>"resource_id"</code> - "<str>",
- <code>"content_id"</code> - "<str>",
  }</p>
<p><a id="services.base_service.BaseService.post_resource_content_addition"></a></p>
<h4 id="post_resource_content_addition">post_resource_content_addition</h4>
<pre><code class="language-python">def post_resource_content_addition(resource_id: str) -&gt; Response
</code></pre>
<p>[POST] /RESOURCE_TYPE/<resource_id>/content
Adds new content to an existing resource while ensuring that duplicate content is not stored.
Content will only be added if its hash differs from any existing content, preventing redundancy.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>resource_id</code> <em>str</em> - The ID of the resource to which the content will be added.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Response</code> - A JSON response indicating success or failure.</li>
</ul>
<p>Process:
  1. Validate resource ID and content file.
  2. Retrieve existing resource metadata.
  3. Compute hash of the new content.
  4. Check for duplicate content (same hash, regardless of extension).
  5. If unique, generate a new content ID and update metadata.
  6. Save updated resource metadata and content file.
  7. Return a success or error response.</p>
<p>Response Structure:
  {
- <code>"status"</code> - "success",
- <code>"message"</code> - "New content added successfully.",
- <code>"resource_id"</code> - "<str>",
- <code>"content_id"</code> - "<str>",
  }</p>
<p><a id="services.base_service.BaseService.get_resource_meta"></a></p>
<h4 id="get_resource_meta">get_resource_meta</h4>
<pre><code class="language-python">def get_resource_meta(resource_id: str) -&gt; Response
</code></pre>
<p>[GET] /RESOURCE_TYPE/<resource_id>/meta
Retrieves metadata for a specific resource, including system-managed (<code>basic_meta</code>)
and user-editable (<code>detail_meta</code>) data.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>resource_id</code> <em>str</em> - The ID of the resource whose metadata is being retrieved.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Response</code> - A JSON response containing the requested resource metadata.</li>
</ul>
<p>Process:
  1. Validate resource ID.
  2. Retrieve metadata from the storage backend.
  3. Return a response with <code>basic_meta</code> and <code>detail_meta</code>.</p>
<p>Response Structure:
  {
- <code>"status"</code> - "success",
- <code>"message"</code> - "Metadata retrieved successfully.",
- <code>"resource_id"</code> - "<str>",
- <code>"basic_meta"</code> - { ... },
- <code>"detail_meta"</code> - { ... }
  }</p>
<p><a id="services.base_service.BaseService.get_resource_content"></a></p>
<h4 id="get_resource_content">get_resource_content</h4>
<pre><code class="language-python">def get_resource_content(resource_id: str,
                         content_id: int,
                         filename: Optional[str] = None) -&gt; Response
</code></pre>
<p>[GET] /RESOURCE_TYPE/<resource_id>/content/<content_id>
Retrieves content for a specific resource by <code>content_id</code>.
<code>extension</code>-based searches have been removed, and MIME type (<code>mimetype</code>) is now used for format management.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>resource_id</code> <em>str</em> - The ID of the resource whose content is being retrieved.</li>
<li><code>content_id</code> <em>int</em> - The unique ID of the content associated with the resource.</li>
</ul>
<p>Query Parameters:
- <code>binary</code> <em>bool, optional</em> - If true, returns raw binary data instead of a base64-encoded string.</p>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Response</code> - Either a JSON response containing a base64-encoded content or raw binary data.</li>
</ul>
<p>Process:
  1. Validate resource ID and content ID.
  2. Retrieve content from the storage backend.
  3. Fetch resource metadata and verify <code>content_id</code> exists.
  4. Retrieve the MIME type (<code>mimetype</code>) of the content.
  5. Apply optional content conversion.
  6. If binary mode is requested, return raw binary data.
  7. Otherwise, encode content in base64 and return a JSON response.</p>
<p>Response Structure (base64-encoded content):
  {
- <code>"status"</code> - "success",
- <code>"message"</code> - "Resource content retrieved successfully.",
- <code>"resource_id"</code> - "<str>",
- <code>"content_id"</code> - "<int>",
- <code>"response_data"</code> - {
- <code>"content"</code> - "<base64-encoded string>",
- <code>"mimetype"</code> - "<mime-type>"
  }
  }</p>
<p><a id="services.base_service.BaseService.get_resource_thumbnail"></a></p>
<h4 id="get_resource_thumbnail">get_resource_thumbnail</h4>
<pre><code class="language-python">def get_resource_thumbnail(resource_id: str) -&gt; Response
</code></pre>
<p>[GET] /RESOURCE_TYPE/<resource_id>/thumbnail
Retrieves the thumbnail for a specific resource.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>resource_id</code> <em>str</em> - The ID of the resource whose thumbnail is being retrieved.</li>
</ul>
<p>Query Parameters:
- <code>thumbnail_size</code> <em>str, optional</em> - Specifies the size of the thumbnail. Defaults to "medium".
  Available sizes: ["original", "small", "medium", "large"].
- <code>binary</code> <em>bool, optional</em> - If true, returns raw binary data instead of a base64-encoded string.</p>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Response</code> - Either a JSON response containing a base64-encoded thumbnail or raw binary data.</li>
</ul>
<p>Process:
  1. Validate resource ID.
  2. Parse query parameters (<code>thumbnail_size</code> and <code>binary</code>).
  3. Retrieve the requested thumbnail from the storage backend.
  4. If binary mode is requested, return raw binary data.
  5. Otherwise, encode thumbnail in base64 and return a JSON response.</p>
<p>Response Structure (base64-encoded thumbnail):
  {
- <code>"status"</code> - "success",
- <code>"message"</code> - "Thumbnail retrieved successfully.",
- <code>"resource_id"</code> - "<str>",
- <code>"response_data"</code> - {
- <code>"thumbnail"</code> - "<base64-encoded string>"
  }
  }</p>
<p><a id="services.base_service.BaseService.put_resource_detail"></a></p>
<h4 id="put_resource_detail">put_resource_detail</h4>
<pre><code class="language-python">def put_resource_detail(resource_id: str) -&gt; Response
</code></pre>
<p>[PUT] /RESOURCE_TYPE/<resource_id>/detail
Updates only the <code>detail_meta</code> for an existing resource.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>resource_id</code> <em>str</em> - The ID of the resource whose metadata is being updated.</li>
</ul>
<p>Request:
  - Requires a JSON file (<code>detail-file</code>) containing the updated metadata.</p>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Response</code> - A JSON response indicating success or failure.</li>
</ul>
<p>Process:
  1. Validate resource ID and check for <code>detail-file</code>.
  2. Parse and validate the JSON metadata.
  3. Update only <code>detail_meta</code>, ensuring <code>basic_meta</code> remains unchanged.
  4. Save the updated resource metadata to storage.
  5. Return a success or error response.</p>
<p>Response Structure:
  {
- <code>"status"</code> - "success",
- <code>"message"</code> - "Details updated successfully.",
- <code>"resource_id"</code> - "<str>",
  }</p>
<p><a id="services.base_service.BaseService.put_resource_content"></a></p>
<h4 id="put_resource_content">put_resource_content</h4>
<pre><code class="language-python">def put_resource_content(resource_id: str, content_id: int) -&gt; Response
</code></pre>
<p>[PUT] /RESOURCE_TYPE/<resource_id>/content/<content_id>
Updates existing content in a resource while ensuring that identical content does not get duplicated.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>resource_id</code> <em>str</em> - The ID of the resource whose content is being updated.</li>
<li><code>content_id</code> <em>int</em> - The ID of the content within the resource.</li>
</ul>
<p>Request:
  - Requires a content file (<code>content-file</code>) for updating the content.
  - Optional: <code>generate-thumbnail=true</code> triggers thumbnail generation.</p>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Response</code> - A JSON response indicating success or failure.</li>
</ul>
<p>Process:
  1. Validate resource ID and content ID.
  2. Ensure the resource and content exist.
  3. Validate and process uploaded content.
  4. Check for duplicate content by comparing hashes.
  5. Update resource metadata and prevent redundant storage.
  6. Save updated resource and return a success response.</p>
<p>Response Structure:
  {
- <code>"status"</code> - "success",
- <code>"message"</code> - "Content updated successfully.",
- <code>"resource_id"</code> - "<str>",
- <code>"content_id"</code> - "<int>",
  }</p>
<p><a id="services.base_service.BaseService.put_resource_thumbnail"></a></p>
<h4 id="put_resource_thumbnail">put_resource_thumbnail</h4>
<pre><code class="language-python">def put_resource_thumbnail(resource_id: str) -&gt; Response
</code></pre>
<p>[PUT] /RESOURCE_TYPE/<resource_id>/thumbnail
Updates the thumbnail for an existing resource without modifying its metadata or content.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>resource_id</code> <em>str</em> - The ID of the resource whose thumbnail is being updated.</li>
</ul>
<p>Request:
  - Requires an image file (<code>thumbnail-file</code>) for updating the thumbnail.</p>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Response</code> - A JSON response indicating success or failure.</li>
</ul>
<p>Process:
  1. Validate resource ID.
  2. Validate and process uploaded thumbnail file.
  3. Apply content validation (<code>_validate_content_format()</code>).
  4. Save updated thumbnail while preserving existing metadata and content.
  5. Return a success or error response.</p>
<p>Response Structure:
  {
- <code>"status"</code> - "success",
- <code>"message"</code> - "Thumbnail updated successfully.",
- <code>"resource_id"</code> - "<str>",
  }</p>
<p><a id="services.base_service.BaseService.patch_resource_thumbnail"></a></p>
<h4 id="patch_resource_thumbnail">patch_resource_thumbnail</h4>
<pre><code class="language-python">def patch_resource_thumbnail(resource_id: str) -&gt; Response
</code></pre>
<p>[PATCH] /RESOURCE_TYPE/<resource_id>/thumbnail
Rotates an existing resource thumbnail by a specified angle.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>resource_id</code> <em>str</em> - The ID of the resource whose thumbnail needs rotation.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Response</code> - <code>HTTPStatus.OK</code> if the rotation is successful, or an error response.</li>
</ul>
<p>Process:
  1. Validate resource ID.
  2. Ensure the resource exists and has an original thumbnail.
  3. Retrieve and validate the angle parameter.
  4. Rotate the thumbnail image.
  5. Save the updated thumbnail.
  6. Return a <code>HTTPStatus.OK</code> response if rotation is successful.</p>
<p>Response Structure:
  - <strong>Success</strong>: <code>HTTPStatus.OK</code>
  - <strong>Failure</strong>: JSON response with error details.</p>
<p><a id="services.base_service.BaseService.delete_resource"></a></p>
<h4 id="delete_resource">delete_resource</h4>
<pre><code class="language-python">def delete_resource(resource_id: str) -&gt; Response
</code></pre>
<p>[DELETE] /RESOURCE_TYPE/<resource_id>
Deletes an existing resource and removes its metadata and content.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>resource_id</code> <em>str</em> - The ID of the resource to delete.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Response</code> - <code>HTTPStatus.NO_CONTENT</code> if deletion is successful, or an error response.</li>
</ul>
<p>Process:
  1. Validate resource ID.
  2. Ensure the resource exists.
  3. Execute resource deletion.
  4. Release the resource ID from resource management.
  5. Return a <code>HTTPStatus.NO_CONTENT</code> response if deletion is successful.</p>
<p>Response Structure:
  - <strong>Success</strong>: <code>HTTPStatus.NO_CONTENT</code>
  - <strong>Failure</strong>: JSON response with error details.</p>
<p><a id="services.base_service.BaseService.delete_resource_content"></a></p>
<h4 id="delete_resource_content">delete_resource_content</h4>
<pre><code class="language-python">def delete_resource_content(resource_id: str, content_id: int) -&gt; Response
</code></pre>
<p>[DELETE] /RESOURCE_TYPE/<resource_id>/content/<content_id>
Deletes a specific content item from a resource without affecting metadata or thumbnails.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>resource_id</code> <em>str</em> - The ID of the resource from which content will be deleted.</li>
<li><code>content_id</code> <em>int</em> - The unique ID of the content item to be deleted.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>Response</code> - <code>HTTPStatus.NO_CONTENT</code> if deletion is successful, or an error response.</li>
</ul>
<p>Process:
  1. Validate resource ID and content ID.
  2. Remove the content from metadata and update <code>basic_meta</code>.
  3. Save updated metadata after deletion.
  4. Delete the actual content from storage.
  5. Return <code>HTTPStatus.NO_CONTENT</code> if deletion is successful.</p>
<p>Response Structure:
  - <strong>Success</strong>: <code>HTTPStatus.NO_CONTENT</code>
  - <strong>Failure</strong>: JSON response with error details.</p>
<p><a id="services.music_service"></a></p>
<h1 id="servicesmusic_service">services.music_service</h1>
<p><a id="services.init"></a></p>
<h1 id="servicesinit">services.init</h1>
<p><a id="services.document_service"></a></p>
<h1 id="servicesdocument_service">services.document_service</h1>
<p><a id="services.image_service"></a></p>
<h1 id="servicesimage_service">services.image_service</h1>
<p><a id="services.video_service"></a></p>
<h1 id="servicesvideo_service">services.video_service</h1>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  </body>
</html>